#!/bin/bash

set -euo pipefail

URL=https://github.com/punchagan/ansible-system-setup.git

# Install Ansible (ansible-pull) and Git
(which ansible-pull && which git) || (sudo apt update && sudo apt install -y ansible git)

# Create ansible log directory
# NOTE: Ensure it is the same as the log path in ansible.cfg
mkdir -p ~/.local/var/log/

ansible-galaxy install petermosmans.customize-gnome
ansible-pull --only-if-changed --url "${URL}" --ask-become-pass "$@"
